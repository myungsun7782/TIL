 # 2024-12-17-TIL

# 동기화 기법 - 1️⃣

## 뮤텍스 락

- 동시에 접근해서는 안 되는 자원에 동시 접근이 불가능하도록 상호 배제를 보장하는 동기화 도구를 말함. 사실, 뮤텍스 락의 뮤텍스(Mutal Exclusion)를 직역하면 '상호 배제'라는 의미임.
- 즉, 뮤텍스 락은 '상호 배제를 위한 락(lock, 자물쇠)'이라는 뜻. 
- 뮤텍스 락의 원리는 다음과 같이 단순함.
  - **임계 구역에 접근하고자 한다면 반드시 락(lock)을 획득(acquire)해야 하고, 임계 구역에서 작업이 끝났다면 락을 해제(release)해야 한다.**
- 전형적인 뮤텍스 락은 프로세스 및 스레드가 공유하는 변수(lock)와 2개의 함수(acquire, release)로 구현됨. 프로세스 및 스레드가 공유하는 변수가 뮤텍스 락의 '락' 역할을 수행함.
- acquire()은 락을 획득하기 위한 함수로, 특정 락에 대해 한 번만 호출이 가능한 함수이며, release()는 획득한 락을 해제하기 위한 함수.
- 임계 구역에 진입하려면 프로세스 및 스레드가 공유하는 락을 획득하는 과정이 선행되어야 하므로, 이를 위해 lock.acquire()을 호출함. 이후 다른 프로세스 및 스레드가 lock.acquire()을 호출하더라도 락을 획득할 수는 없음. 락이 해제될 때까지 기다려야 함.
- 임계 구역의 작업이 끝나면 락을 해제하기 위해 lock.release()를 호출하며, 만약 임계 구역 앞에서 대기하는 프로세스 혹은 스레드가 있었다면 그때서야 비로소 락을 획득하고(lock.acquire() 호출에 성공하고) 임계 구역에 진입하게 됨.

<img width="614" alt="image" src="https://github.com/user-attachments/assets/81df6b30-aa42-4b58-a86d-d6721cd9a52b">

(그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

- 예를 들어보자. 공유 자우너은 1개이고, P1, P2가 공유자원에 접근하려는 프로세스라고 할 때 P1, P2의 순서로 임계 구역에 접근한다고 가정해보자. 뮤텍스 락을 사용하면 다음과 같이 순서로 프로세스가 실행됨.

<img width="618" alt="image" src="https://github.com/user-attachments/assets/5e41f2f8-9ca8-41e8-8a22-6351e3b3ddef">

(그림출처: 이것이 취업을 위한 컴퓨터 과학이다)

