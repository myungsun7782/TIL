# 2024-12-11-TIL

# 멀티프로세스와 멀티스레드

- 만약 한 프로세스를 구성하는 코드를 동시에 실행하려면 어떻게 해야 할까?

  - 첫 번째 방법은 프로그램을 각기 다른 여러 프로세스로 생성하여 실행하는 방법입니다. 예를 들어, 'hi.txt'라는 파일의 값을 읽어 들인 뒤, 그 값을 화면에 출력하는 프로그램을 떠올려 보자. 이 프로그램을 각기 다른 3개의 프로세스로 만들어 3번 메모리에 적재하면 'hi.txt'파일은 3번 읽히고, 3번 화면에 출력됩니다.
  - 이를 잘 보여주는 사례가 바로 웹 브라우저의 탭입니다. 웹 브라우저마다 조금씩 구현의 차이는 있지만, 웹 브라우저는 일반적으로 하나의 탭마다 하나의 프로세스로 동작함. 윈도우 운영체제를 사용하고 있다면 [작업 관리자]를 열어 둔 상태에서 크롬 브라우저를 열어보자. 다음과 같이 [작업 관리자] - [프로세스] 탭에서 하나 이상의 프로세스가 실행되고 있는 것을 볼 수 있음.

  <img width="529" alt="image" src="https://github.com/user-attachments/assets/cbe3ee0a-9a50-4838-a650-7f01ec898c8f">

  (그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

  - 탭이 하나 추가될 때마다 프로세스도 하나씩 추가되는 것을 볼 수 있음. 이렇게 동시에 여러 프로세스가 실행되는 것을 **멀티프로세스(multi-process)**라고 함.

  <img width="535" alt="image" src="https://github.com/user-attachments/assets/f8201784-1ec9-4bdb-8ba1-cd7c04e81712">

  (그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

  - 여기서 중요한 점은 각기 다른 프로세스들이 기본적으로 자원을 공유하지 않고, 독립적으로 실행된다는 점입니다. 같은 작업을 수행하고 있지만 각각의 PID(프로세스 ID) 값이 다르고, 프로세스별로 파일과 입출력장치 등의 자원이 독립적으로 할당되어 다른 프로세스에 영향을 거의 끼치지 않음. 그래서 한 프로세스의 실행 과정에서 문제가 발생하더라도 다른 프로세스에 직접적인 영향을 끼치지 않는 경우가 많음. 각각의 프로세스가 남남처럼 실행되므로.

  <img width="215" alt="image" src="https://github.com/user-attachments/assets/e0058257-e6d7-4787-aeb7-10b71f3e09f7">

  (그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

  - 한 프로세스를 구성하는 코드를 동시에 실행하는 방법에는 여러 스레드를 이용하는 방법도 있음. 이 때 프로세스를 동시에 실행하는 여러 스레드를 **멀티 스레드(multi-thread)**라고 함.
  - 하나의 스레드는 스레드를 식별할 수 있는 고유 정보인 스레드 ID와 프로그램 카운터, 레지스터 값, 스택 등으로 구성됨. 스레드마다 각각의 프로그램 카운터 값과 스택을 가지고 있기 때문에 스레드마다 다음에 실행할 주소를 가질 수 있고, 연산 과정의 임시 저장 값을 가질 수 있음.

  <img width="447" alt="image" src="https://github.com/user-attachments/assets/036e8163-5e40-42d8-a1fd-22d4d54cb48a">

  (그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

  

  - 멀티 프로세스와 멀티 스레드의 가장 큰 차이점은 **자원의 공유 여부**에 있음.
  - 서로 다른 프로세스들은 기본적으로 자원을 공유하지 않기 때문에, 독립적으로 실행되는 반면, 같은 프로세스를 실행하는 여러 스레들은 프로세스의 자원을 공유함. 
  - 스레드들은 동일한 주소 공간의 코드, 데이터, 힙 영역을 공유하고, 열린 파일과 같은 프로세스의 자원을 공유하기 때문에 쉽게 협력하고 통신할 수 있음.
  - 다만, 멀티프로세스 환경에서는 한 프로세스에 문제가 생겨도 다른 프로세스에는 지장이 없거나 적지만, 멀티 스레드 환경에서는 한 스레드에 생긴 문제가 프로세스 전체의 문제가 될 수 있음.

  <img width="610" alt="image" src="https://github.com/user-attachments/assets/c741fc9b-9be3-4d8e-8834-424c891f3905">

  (그림 출처: 이것이 취업을 위한 컴퓨터 과학이다.)

  

  

  