# 2023년 12월 18일(월)

----

### Today I Learned 

- [iOS] 키-값 관찰 (Key-Value Observing, KVO), 프로퍼티 옵저버 (Property Observer)

---

Swift에서 키-값 관찰(Key-Value Observing, KVO)과 프로퍼티 옵저버(Property Observer)는 모두 객체의 상태 변화를 관찰하는 데 사용되는 기능입니다. 이 둘은 유사한 목적을 가지고 있지만, 구현 방식과 사용 시나리오에서 차이가 있습니다.

### 키-값 관찰 (Key-Value Observing, KVO)

#### 정의 및 특징

- **KVO**는 Objective-C의 `NSKeyValueObserving` 프로토콜을 기반으로 합니다.
- KVO는 객체의 특정 속성의 변경을 관찰할 수 있게 해줍니다.
- Cocoa의 `NSObject`를 상속받는 클래스에서 주로 사용됩니다.
- 동적 디스패치(dynamic dispatch)를 사용합니다.

#### 사용 시나리오

- **Objective-C와 호환성**이 필요한 경우.
- **여러 속성을 동시에 관찰**해야 하는 경우.
- **Framework** 또는 **외부 라이브러리**에서 제공하는 객체의 변화를 관찰해야 할 때.

#### 주의사항

- KVO를 사용할 때는 **메모리 관리**에 주의해야 합니다. 관찰자를 제거하지 않으면 메모리 누수가 발생할 수 있습니다.
- Swift의 **모든 타입**에 사용할 수 없으며, `NSObject`를 상속받는 클래스에 한정됩니다.
- KVO는 **간접적인 접근**을 사용하기 때문에, 코드의 가독성과 유지 보수성이 다소 떨어질 수 있습니다.

### 프로퍼티 옵저버 (Property Observer)

#### 정의 및 특징

- **프로퍼티 옵저버**는 Swift의 `willSet`과 `didSet`을 사용하여 구현됩니다.
- 특정 프로퍼티의 값이 변경될 때 호출됩니다.
- Swift의 모든 클래스, 구조체, 열거형에서 사용 가능합니다.
- 컴파일 타임에 결정되며, 더 명시적입니다.

#### 사용 시나리오

- **Swift 내부**에서 프로퍼티의 변경을 관찰해야 할 때.
- **단일 속성의 변화**에 응답해야 할 때.
- **간단한 상황**에서 빠르고 쉽게 사용하고자 할 때.

#### 이점과 한계

- **이점**: 코드의 가독성이 좋고, 사용이 간편합니다. Swift의 강력한 타입 시스템을 활용할 수 있습니다.
- **한계**: `willSet`과 `didSet`은 오직 값 타입의 저장 프로퍼티에서만 사용할 수 있습니다. 참조 타입의 프로퍼티나 계산된 프로퍼티에서는 사용할 수 없습니다.